<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini API é…ç½®</title>
    <link rel="stylesheet" href="/static/css/common.css">
    <link rel="stylesheet" href="/static/css/admin.css">
</head>
<body class="gradient-bg">
    <div class="admin-container">
        <div class="admin-wrapper">
            <div class="card">
                <div class="admin-header">
                    <div>
                        <h1 class="admin-title">
                            <span class="admin-title-icon">ğŸ¤–</span>
                            Gemini API é…ç½®
                        </h1>
                        <p class="admin-subtitle">
                            é…ç½® Google Gemini çš„è®¤è¯ä¿¡æ¯ï¼Œä¿å­˜åå³å¯è°ƒç”¨ API
                        </p>
                    </div>
                    <a href="/admin/logout" class="logout-link">é€€å‡ºç™»å½•</a>
                </div>
                
                <div class="info-box">
                    <strong>è·å–æ–¹æ³•ï¼š</strong><br>
                    1. æ‰“å¼€ <a href="https://gemini.google.com" target="_blank">gemini.google.com</a> å¹¶ç™»å½•<br>
                    2. F12 â†’ ç½‘ç»œ â†’ å‘é€å†…å®¹åˆ°èŠå¤© â†’ ç‚¹å‡»ä»»æ„è¯·æ±‚ â†’ Copy è¯·æ±‚å¤´å†…å®Œæ•´cookie
                </div>
                
                <form id="configForm" class="config-form">
                    <div class="section">
                        <div class="section-title">ğŸ”‘ Cookie é…ç½®</div>
                        <div class="form-group">
                            <label for="FULL_COOKIE">
                                å®Œæ•´ Cookie <span class="required">*</span>
                            </label>
                            <textarea 
                                name="FULL_COOKIE" 
                                id="FULL_COOKIE" 
                                rows="6" 
                                placeholder="ç²˜è´´ä»æµè§ˆå™¨å¤åˆ¶çš„å®Œæ•´ Cookie å­—ç¬¦ä¸²ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è§£ææ‰€éœ€å­—æ®µå’Œ Token..." 
                                required
                            ></textarea>
                            <div id="parsedInfo" class="parsed-info">
                                <h4>âœ… å·²è§£æçš„å­—æ®µï¼š</h4>
                                <div id="parsedFields"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="MANUAL_SNLM0E">
                                AT Token (SNlM0e) 
                                <span class="optional">(å¯é€‰ï¼Œå¦‚æœè‡ªåŠ¨è·å–å¤±è´¥å¯æ‰‹åŠ¨å¡«å†™)</span>
                            </label>
                            <input 
                                type="text" 
                                name="MANUAL_SNLM0E" 
                                id="MANUAL_SNLM0E" 
                                placeholder="å¦‚æœè‡ªåŠ¨è·å–å¤±è´¥ï¼Œå¯æ‰‹åŠ¨å¡«å†™ AT Token"
                            >
                            <div class="info-box" style="margin-top:8px;font-size:12px;">
                                <strong>æ‰‹åŠ¨è·å–æ–¹æ³•ï¼š</strong>æ‰“å¼€ gemini.google.com â†’ F12 â†’ æŸ¥çœ‹é¡µé¢æºä»£ç  (Ctrl+U) â†’ æœç´¢ "SNlM0e" â†’ å¤åˆ¶å¼•å·å†…çš„å€¼
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="MANUAL_PUSH_ID">
                                PUSH_ID 
                                <span class="optional">(å¯é€‰ï¼Œç”¨äºå›¾ç‰‡ä¸Šä¼ åŠŸèƒ½ï¼Œå¦‚æœè‡ªåŠ¨è·å–å¤±è´¥å¯æ‰‹åŠ¨å¡«å†™)</span>
                            </label>
                            <input 
                                type="text" 
                                name="MANUAL_PUSH_ID" 
                                id="MANUAL_PUSH_ID" 
                                placeholder="æ ¼å¼: feeds/xxxxx (å¦‚æœè‡ªåŠ¨è·å–å¤±è´¥ï¼Œå¯æ‰‹åŠ¨å¡«å†™)"
                            >
                            <div class="info-box" style="margin-top:8px;font-size:12px;">
                                <strong>æ‰‹åŠ¨è·å–æ–¹æ³•ï¼š</strong><br>
                                æ–¹æ³•1: æ‰“å¼€ gemini.google.com â†’ F12 â†’ Network â†’ ä¸Šä¼ ä¸€å¼ å›¾ç‰‡ â†’ æŸ¥æ‰¾ upload è¯·æ±‚ â†’ åœ¨è¯·æ±‚å¤´ä¸­æ‰¾åˆ° push-id æˆ– feeds/xxxxx<br>
                                æ–¹æ³•2: åœ¨é¡µé¢æºä»£ç ä¸­æœç´¢ "feeds/" æ‰¾åˆ°ç±»ä¼¼ "feeds/xxxxxxxxxxxxxx" çš„å­—ç¬¦ä¸²
                            </div>
                        </div>
                    </div>
                    
                    <div class="section">
                        <div class="section-title">
                            ğŸ¯ æ¨¡å‹ ID é…ç½® 
                            <span class="optional">(å¯é€‰ï¼Œå¦‚æœæ¨¡å‹åˆ‡æ¢å¤±æ•ˆè¯·æ›´æ–°)</span>
                        </div>
                        <div class="info-box">
                            <strong>è·å–æ–¹æ³•ï¼š</strong>F12 â†’ Network â†’ åœ¨ Gemini ä¸­åˆ‡æ¢æ¨¡å‹å‘é€æ¶ˆæ¯ â†’ æ‰¾åˆ°è¯·æ±‚å¤´ <code>x-goog-ext-525001261-jspb</code> â†’ å¤åˆ¶æ•´ä¸ªæ•°ç»„å€¼ç²˜è´´åˆ°ä¸‹æ–¹è¾“å…¥æ¡†
                        </div>
                        <div class="form-group">
                            <label for="MODEL_ID_PARSER">
                                å¿«é€Ÿè§£æ 
                                <span class="optional">(ç²˜è´´è¯·æ±‚å¤´æ•°ç»„è‡ªåŠ¨æå– ID)</span>
                            </label>
                            <input 
                                type="text" 
                                id="MODEL_ID_PARSER" 
                                placeholder='ç²˜è´´å¦‚: [1,null,null,null,"56fdd199312815e2",null,null,0,[4],null,null,2]'
                            >
                            <div id="parsedModelId" class="parsed-info" style="margin-top:10px;">
                                <h4>âœ… å·²æå–çš„æ¨¡å‹ IDï¼š</h4>
                                <div id="parsedModelIdValue"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="MODEL_ID_FLASH">æé€Ÿç‰ˆ (Flash) ID</label>
                            <input 
                                type="text" 
                                name="MODEL_ID_FLASH" 
                                id="MODEL_ID_FLASH" 
                                placeholder="56fdd199312815e2"
                            >
                        </div>
                        <div class="form-group">
                            <label for="MODEL_ID_PRO">Pro ç‰ˆ ID</label>
                            <input 
                                type="text" 
                                name="MODEL_ID_PRO" 
                                id="MODEL_ID_PRO" 
                                placeholder="e6fa609c3fa255c0"
                            >
                        </div>
                        <div class="form-group">
                            <label for="MODEL_ID_THINKING">æ€è€ƒç‰ˆ (Thinking) ID</label>
                            <input 
                                type="text" 
                                name="MODEL_ID_THINKING" 
                                id="MODEL_ID_THINKING" 
                                placeholder="e051ce1aa80aa576"
                            >
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">ğŸ’¾ ä¿å­˜é…ç½®</button>
                </form>
                
                <div id="status" class="status"></div>
                
                <div class="api-info">
                    <h3>ğŸ“¡ API è°ƒç”¨ä¿¡æ¯</h3>
                    <p>Base URL: <strong id="baseUrl"></strong></p>
                    <p>API Key: <strong id="apiKey"></strong></p>
                    <p>å¯ç”¨æ¨¡å‹: <code>gemini-3.0-flash</code> | <code>gemini-3.0-pro</code> | <code>gemini-3.0-flash-thinking</code></p>
                    
                    <h4>ğŸ’¬ æ–‡æœ¬å¯¹è¯</h4>
                    <pre>from openai import OpenAI
client = OpenAI(base_url="<span id="codeUrl"></span>", api_key="<span id="codeKey"></span>")

response = client.chat.completions.create(
    model="gemini-3.0-flash",  # æˆ– gemini-3.0-pro / gemini-3.0-flash-thinking
    messages=[{"role": "user", "content": "ä½ å¥½"}]
)
print(response.choices[0].message.content)</pre>
                    
                    <h4>ğŸ–¼ï¸ å›¾ç‰‡è¯†åˆ«</h4>
                    <pre>import base64
from openai import OpenAI
client = OpenAI(base_url="<span id="codeUrl2"></span>", api_key="<span id="codeKey2"></span>")

# è¯»å–æœ¬åœ°å›¾ç‰‡
with open("image.png", "rb") as f:
    img_b64 = base64.b64encode(f.read()).decode()

response = client.chat.completions.create(
    model="gemini-3.0-flash",
    messages=[{
        "role": "user",
        "content": [
            {"type": "text", "text": "è¯·æè¿°è¿™å¼ å›¾ç‰‡"},
            {"type": "image_url", "image_url": {"url": f"data:image/png;base64,{img_b64}"}}
        ]
    }]
)
print(response.choices[0].message.content)</pre>
                    
                    <h4>ğŸŒŠ æµå¼å“åº”</h4>
                    <pre>stream = client.chat.completions.create(
    model="gemini-3.0-flash",
    messages=[{"role": "user", "content": "å†™ä¸€é¦–è¯—"}],
    stream=True
)
for chunk in stream:
    if chunk.choices[0].delta.content:
        print(chunk.choices[0].delta.content, end="", flush=True)</pre>
                    
                    <h4>ğŸ“· ç¤ºä¾‹å›¾ç‰‡</h4>
                    <div class="sample-image-container">
                        <p style="font-size:12px;color:#666;margin-bottom:8px;">
                            ä»¥ä¸‹æ˜¯ image.png ç¤ºä¾‹å›¾ç‰‡ï¼Œå¯ç”¨äºæµ‹è¯•å›¾ç‰‡è¯†åˆ«åŠŸèƒ½ï¼ˆç‚¹å‡»æ”¾å¤§ï¼‰ï¼š
                        </p>
                        <img 
                            id="sampleImage" 
                            src="/static/image.png" 
                            alt="ç¤ºä¾‹å›¾ç‰‡" 
                            class="sample-image"
                            onclick="showImageModal()"
                            onerror="this.style.display='none';this.nextElementSibling.style.display='block';"
                        >
                        <p style="display:none;font-size:12px;color:#999;">
                            ï¼ˆç¤ºä¾‹å›¾ç‰‡ä¸å¯ç”¨ï¼Œè¯·ç¡®ä¿ image.png æ–‡ä»¶å­˜åœ¨ï¼‰
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- å›¾ç‰‡æ”¾å¤§æ¨¡æ€æ¡† -->
    <div id="imageModal" class="image-modal">
        <img src="/static/image.png" alt="ç¤ºä¾‹å›¾ç‰‡">
        <span class="image-modal-close" onclick="hideImageModal()">&times;</span>
    </div>
    
    <script>
        // æ³¨å…¥é…ç½®åˆ°å…¨å±€
        window.CONFIG = {
            API_KEY: "{{ API_KEY }}",
            PORT: {{ PORT }}
        };
    </script>
    <script src="/static/js/common.js"></script>
    <script src="/static/js/admin.js"></script>
</body>
</html>

